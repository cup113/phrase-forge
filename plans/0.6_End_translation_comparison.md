# 翻译对照功能 - 剩余工作清单

## 当前状态

✅ **工期1 - 基础架构**：完成

- 类型系统重构：`Task` 联合类型，`string[][]` 数据结构
- API 服务扩展：`evaluateTranslation` 函数
- 状态管理适配：支持两种任务类型

✅ **工期2 - 用户界面**：完成

- Tab 切换界面：句子制作 / 翻译对照
- 翻译输入表单：多行文本框 + 括号语法解析
- 组件分离：`SentenceInputForm.vue` + `TranslationInputForm.vue`

## 工期3 - 集成与优化（未完成）

### 1. 任务队列适配

**问题**：`TaskQueue.vue` 和 `TaskItem.vue` 需要支持显示翻译对照任务

**需要修改**：

- `src/components/TaskQueue.vue` - 显示两种任务类型
- `src/components/TaskItem.vue` - 适配翻译对照任务的显示格式

**验证点**：

- 翻译任务能正确显示在队列中
- 任务状态更新正常
- 错误处理正常工作

### 2. 历史记录优化

**问题**：历史记录需要支持按任务类型筛选

**需要修改**：

- `src/stores/history.ts` - 添加任务类型筛选
- `src/views/HistoryView.vue` - 更新统计信息显示

**验证点**：

- 能正确存储和显示翻译对照历史
- 统计信息包含两种任务类型
- 筛选功能正常工作

### 3. API 集成验证

**问题**：翻译评估 API 调用需要完整测试

**需要验证**：

- `src/services/apiService.ts` 中的 `evaluateTranslation` 函数
- 查询字符串转换逻辑：`string[][]` → `"get (A. happier / B. merrier)"`
- API Endpoint 配置正确性

**验证点**：

- 翻译任务能成功提交到 API
- API 响应能正确解析
- 错误情况处理正常

## 关键风险点

1. **任务队列显示**：翻译对照任务可能显示格式不正确
2. **历史记录兼容**：现有历史记录可能无法正确分类
3. **API 调用格式**：翻译评估的查询字符串格式需要验证

## 测试清单

- [ ] 提交翻译对照任务，验证队列显示
- [ ] 验证翻译任务的处理流程
- [ ] 检查历史记录中的翻译任务
- [ ] 测试 API 错误处理
- [ ] 验证向后兼容性（句子制作功能不受影响）
